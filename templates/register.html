{% extends "layout.html" %}

{% block title %}Register - StockLeague{% endblock %}

{% block main %}
<div class="container-fluid d-flex align-items-center justify-content-center" style="min-height: calc(100vh - 70px);">
    <div class="row justify-content-center w-100">
        <div class="col-lg-5 col-md-7">
            <!-- Header Section with Gradient -->
            <div class="text-center mb-4">
                <div class="display-4 mb-3" style="background: var(--gradient-accent); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    <i class="fas fa-user-plus"></i>
                </div>
                <h1 class="h2 fw-bold" style="color: var(--text-primary);">Get Started</h1>
                <p style="color: var(--text-secondary);">Join StockLeague and start trading today</p>
            </div>

            <!-- Register Card -->
            <div class="card shadow-lg border-0" style="border-radius: 20px; overflow: hidden;">
                <div class="card-body p-4">
                    <form action="/register" method="post" class="register-form">
                        <!-- Username Input -->
                        <div class="mb-4">
                            <label for="username" class="form-label fw-600 mb-2">
                                <i class="fas fa-user text-primary me-2"></i>Username
                            </label>
                            <input type="text" class="form-control form-control-lg" id="username" name="username" 
                                   placeholder="Choose a username" autocomplete="username" required autofocus>
                            <small style="color: var(--text-muted);">3-20 characters, letters and numbers only</small>
                        </div>

                        <!-- Password Input -->
                        <div class="mb-4">
                            <label for="password" class="form-label fw-600 mb-2">
                                <i class="fas fa-lock text-primary me-2"></i>Password
                            </label>
                            <input type="password" class="form-control form-control-lg" id="password" name="password" 
                                   placeholder="Create a strong password" autocomplete="new-password" required>
                            <small style="color: var(--text-muted);">Minimum 8 characters, mix of letters and numbers recommended</small>
                        </div>

                        <!-- Confirm Password Input -->
                        <div class="mb-4">
                            <label for="confirmation" class="form-label fw-600 mb-2">
                                <i class="fas fa-check-circle text-primary me-2"></i>Confirm Password
                            </label>
                            <input type="password" class="form-control form-control-lg" id="confirmation" name="confirmation" 
                                   placeholder="Re-enter your password" autocomplete="new-password" required>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-success btn-lg w-100 fw-600 py-2 mt-3" style="border-radius: 10px; font-size: 1.1rem;">
                            <i class="fas fa-user-plus me-2"></i>Create Account
                        </button>
                    </form>

                    <!-- Divider -->
                    <div class="position-relative my-4">
                        <hr style="border-color: var(--border-color);">
                        <span style="position: absolute; left: 50%; top: -12px; transform: translateX(-50%); background: var(--card-bg); padding: 0 12px; color: var(--text-muted); font-size: 0.85rem;">
                            Already registered?
                        </span>
                    </div>

                    <!-- Login Link -->
                    <p class="text-center mb-0" style="color: var(--text-secondary);">
                        Have an account? 
                        <a href="/login" class="fw-600" style="color: var(--primary-color); text-decoration: none;">
                            Log in here
                        </a>
                    </p>
                </div>
            </div>

            <!-- Footer Note -->
            <p class="text-center mt-4 small" style="color: var(--text-muted);">
                ðŸŽ¯ Start with $10,000 virtual cash and begin trading
            </p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Enhanced client-side password validation with better UX
    const form = document.querySelector('form.register-form');
    const passwordInput = document.getElementById('password');
    const confirmationInput = document.getElementById('confirmation');
    
    // Real-time password match indicator
    confirmationInput.addEventListener('input', function() {
        if (this.value && passwordInput.value !== this.value) {
            this.classList.add('is-invalid');
            this.classList.remove('is-valid');
        } else if (this.value === passwordInput.value) {
            this.classList.add('is-valid');
            this.classList.remove('is-invalid');
        } else {
            this.classList.remove('is-invalid', 'is-valid');
        }
    });
    
    form.addEventListener('submit', function(e) {
        const password = passwordInput.value;
        const confirmation = confirmationInput.value;
        
        if (password.length < 8) {
            e.preventDefault();
            alert('Password must be at least 8 characters long');
            passwordInput.focus();
            return;
        }
        
        if (password !== confirmation) {
            e.preventDefault();
            alert('Passwords do not match. Please check and try again.');
            confirmationInput.focus();
            return;
        }
    });
</script>
{% endblock %}
