# Quote Page Trading Interface - Visual Guide

## New Quote Page Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STOCK HEADER                             â”‚
â”‚         Symbol  â”‚  Price  â”‚  Change  â”‚  Watch Button        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TECHNICAL CHART                           â”‚
â”‚                   (TradingView Widget)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TRADING INTERFACE (NEW!)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ðŸ† Trading in League: [League Name]  X                    â”‚
â”‚  (or ðŸ‘¤ Trading in Personal Portfolio  X)                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Trade AAPL          Available Cash: $50,000          â”‚  â”‚
â”‚  â”‚                      Your Holdings: 25 shares         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚  â”‚
â”‚  â”‚ ðŸ›’ Buy     â”‚ ðŸ’° Sell      â”‚                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚  â”‚
â”‚                                                          â”‚  â”‚
â”‚  [BUY TAB ACTIVE]                                       â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                                                    â”‚ â”‚  â”‚
â”‚  â”‚ # Number of Shares                                â”‚ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ [        10        ]  â”‚ Max â†‘ â”‚                  â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚  â”‚
â”‚  â”‚ Max: 111 shares @ $450.00                         â”‚ â”‚  â”‚
â”‚  â”‚                                                    â”‚ â”‚  â”‚
â”‚  â”‚ ðŸ“ˆ Strategy (Optional)                            â”‚ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ [No Strategy           â–¼]        â”‚              â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚  â”‚
â”‚  â”‚                                                    â”‚ â”‚  â”‚
â”‚  â”‚ ðŸ“ Notes (Optional)                               â”‚ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ Why are you buying?               â”‚              â”‚ â”‚  â”‚
â”‚  â”‚ â”‚                                    â”‚              â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚  â”‚
â”‚  â”‚                                                    â”‚ â”‚  â”‚
â”‚  â”‚ â”Œâ”€ ORDER SUMMARY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚ â”‚  Price Per Share    Total Cost    Cash After  â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â”‚    $450.00          $4,500.00     $45,500.00  â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚                                                    â”‚ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚ â”‚  ðŸ›’ Buy AAPL                                 â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚                                                    â”‚ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                                                         â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  NEWS & ARTICLES                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Tab Switching - Buy to Sell

When user has shares of the stock:

```
Buy Tab                          Sell Tab
[ðŸ›’ Buy] [ðŸ’° Sell âœ“]          [ðŸ›’ Buy] [ðŸ’° Sell âœ“]
  ACTIVE       ENABLED            HIDDEN       ACTIVE

# Buy Form                       # Sell Form
   Price: $450.00                   Price: $450.00
   Max Shares: 111                  You Own: 25 shares
   (based on cash)                  (based on holdings)
```

When user has NO shares of the stock:

```
[ðŸ›’ Buy] [ðŸ’° Sell âœ—]
  Can Trade    Cannot Sell

Sell Tab shows:
âš ï¸ You don't own any shares of AAPL
   Buy some to get started! [Buy link]
```

## Real-time Calculations

### Buy Form Example:
```
User Input: 10 shares of AAPL at $150.00

Price Per Share: $150.00
    â†“
    Ã— 10 shares
    â†“
Total Cost: $1,500.00
    â†“
USER CASH: $50,000.00
    â†“
    - $1,500.00
    â†“
Cash After: $48,500.00 âœ“ (GREEN - Valid)

[Submit Button] â†’ ENABLED
```

### Buy Form - Insufficient Funds:
```
User Input: 500 shares of AAPL at $150.00

Price Per Share: $150.00
    â†“
    Ã— 500 shares
    â†“
Total Cost: $75,000.00 âŒ (RED - Too much!)
    â†“
USER CASH: $50,000.00
    â†“
    - $75,000.00
    â†“
Cash After: -$25,000.00 âŒ (RED - Invalid)

[Submit Button] â†’ DISABLED
```

### Sell Form Example:
```
User Input: 10 shares of AAPL at $150.00

Price Per Share: $150.00
    â†“
    Ã— 10 shares
    â†“
Total Proceeds: $1,500.00
    â†“
USER CASH: $50,000.00
    â†“
    + $1,500.00
    â†“
Cash After: $51,500.00 âœ“ (Always valid!)

[Submit Button] â†’ ENABLED
```

## Feature Details

### Max Buttons
- **Max Buy**: Fills shares with: `floor(userCash / stockPrice)`
- **Max Sell**: Fills shares with: `userShares` (all holdings)
- Both update form and calculations immediately

### Order Summary Box
Updates in real-time as user types:
- Shows exact cost/proceeds calculation
- Shows cash balance after transaction
- Color codes for validation feedback
- Always visible for user confirmation

### Form Validation
- **Buy**: Disables submit if total cost > available cash
- **Sell**: Limits input to user's share count (max attribute)
- **Both**: Prevents zero or negative shares

### Portfolio Context
Located above tabs:
- Shows current trading context (Personal or League)
- Shows portfolio name if in league
- Can be dismissed with X button
- Prevents accidental trades in wrong portfolio

## JavaScript Behavior

```javascript
// Core Variables (from server)
STOCK_PRICE = 450.00    // Current market price
USER_CASH = 50000.00    // Available cash
USER_SHARES = 25        // Currently owned shares

// Buy Calculations
updateBuyCalculations() {
    shares = input.value
    totalCost = shares * STOCK_PRICE
    cashAfter = USER_CASH - totalCost
    
    // Disable submit if insufficient funds
    if (cashAfter < 0) {
        submitBtn.disabled = true
    }
}

// Sell Calculations
updateSellCalculations() {
    shares = input.value
    totalProceeds = shares * STOCK_PRICE
    cashAfter = USER_CASH + totalProceeds
    
    // Prevent selling more than owned
    if (shares > USER_SHARES) {
        input.value = USER_SHARES
    }
}

// Event Listeners
- Input change â†’ recalculate
- Max buttons â†’ auto-fill + recalculate
- Tab switch â†’ swap form displays
```

## Mobile Responsive Design

### Desktop (>768px)
- Side-by-side form fields
- Full-width order summary boxes
- Tabs fully visible

### Tablet (576-767px)
- Stacked form fields
- Full-width inputs
- Tabs with scroll if needed

### Mobile (<576px)
- Single column layout
- Full-width buttons
- Scrollable tab content
- Compact alerts

## Comparison: Old vs New

### Old Flow (Separate Pages)
```
Quote Page
    â†“
[Buy Link] â”€â”€â†’ /buy page â”€â”€â†’ Fill form â”€â”€â†’ Submit â”€â”€â†’ Back to Quote
            or
[Sell Link] â”€â”€â†’ /sell page â”€â”€â†’ Fill form â”€â”€â†’ Submit â”€â”€â†’ Back to Quote
```

### New Flow (Unified)
```
Quote Page
â”œâ”€ [Buy Tab] â”€â”€â†’ Fill form â”€â”€â†’ Submit (stays on page with feedback)
â””â”€ [Sell Tab] â”€â”€â†’ Fill form â”€â”€â†’ Submit (stays on page with feedback)

(No navigation required!)
```

## User Experience Benefits

1. **Speed**: Trade without leaving the page
2. **Visibility**: Always see current price and holdings
3. **Feedback**: Real-time calculations before submit
4. **Safety**: Validation prevents invalid orders
5. **Context**: Always clear which portfolio you're trading in
6. **Efficiency**: Max buttons save calculation time
7. **Clarity**: Order summary box shows exact costs/proceeds

